var VM=new function(){function ut(n){n&&(n.style.display="block",n.tabIndex="0")}function c(n){n&&(n.style.display="none",n.tabIndex="-1")}function o(){ut(i),c(e)}function a(){c(i),ut(e)}function tt(n){if(_w.B_er)throw n;}function h(){try{n&&n.play&&n.play()}catch(t){tt(t)}}function l(){try{n&&n.pause&&n.pause()}catch(t){tt(t)}}function ot(){o(),l()}function st(){t===!0&&(a(),h())}function nt(n){var t=n?sj_be:sj_ue;ft?(d(),t(_d,r,d),t(_w,"unload",et)):(t(_w,"blur",ot),t(_w,"focus",st))}function d(){_d[u]?n.pause():t===!0&&h()}function et(){sj_ue(_d,r,d)}var it="hidden",s="Hidden",p="visibilitychange",b="undefined",w="ms",k="webkit",n,i=_ge("sh_pl"),e=_ge("sh_ps"),g,rt,u,r,t,f,ft,y,v;this.Loaded=!1,this.InFoc=1,t=!0,this._autoPlay=!0,f="hpVideoPause",ft=function(){if(typeof _d[it]!==b)u=it,r=p;else if(typeof _d[w+s]!==b)u=w+s,r=w+p;else if(typeof _d[k+s]!==b)u=k+s,r=k+p;else return!1;return!0}(),i&&(y=i.parentNode,v=e.parentNode,sj_be(y,"click",function(){v.focus()}),sj_be(v,"click",function(){y.focus()})),this.hideControls=function(){c(i),c(e),nt(!1)},this.end=function(){o()},this.playAction=function(){this.play(),_w.g_hpLocal&&localStorage.removeItem(f)},this.pauseAction=function(){this.pause(),_w.g_hpLocal&&localStorage.setItemE(f,1,1440)},this.play=function(){a(),h(),t=!0},this.pause=function(){o(),l(),t=!1},this.fade=function(){!VM.Loaded&&VM.InFoc&&(VM._autoPlay?(h(),a()):(l(),o()),_anim.fadeE(n).up(),VM.Loaded=!0,typeof HPV_lat=="function"&&(rt=sb_gt()-g,HPV_lat(rt))),_w.g_NPLE&&!--_w.g_NPLE&&sj_evt.fire("onRBComplete")},this.sa_vid_ld=function(i){var u,s,h,c,r,o,e;if(n=_ge("vid"),!VM.Loaded&&_w.g_vid&&n&&n.play){for(u=_w.g_vid,sj_be(n,"canplaythrough",function(){nt(!0),i?i():VM.fade()}),r=0;r<u.length;r++)if(!!(n.canPlayType&&n.canPlayType(u[r][1]).match(/^(probably|maybe)$/i))){h=u[r][1],s=u[r][2],g=sb_gt();break}if(c=_w.g_img.hdon&&_w.g_img.hdsup,c)for(r=0;r<u.length;r++)if(u[r][0]=="mp4hd"){h=u[r][1],s=u[r][2];break}if(g)n.type=h,n.src=s;else return;sj_so(n,0),VM._autoPlay=!0,_w.g_hpLocal&&(o=localStorage.getItemE(f),o!=null&&o===1&&(VM._autoPlay=!1,t=!1)),e=sj_cook&&sj_cook.get("SRCHHPGUSR","HAP"),e&&e!="0"&&(VM._autoPlay=!1,t=!1)}}},ImgViewer;sj_evt.bind("onBgSet",function(){VM.Loaded===!1&&VM.sa_vid_ld()},1),ImgViewer=function(){function wr(){var n=_ge("hp_cellCenter");return n&&n.className.indexOf("hp_hd")!=-1&&hp_defined(g_img.hdurl)&&g_img.url==g_img.hdurl?!0:!1}function fr(n,t,i){var r=sj_gx(),f=hp_pushparams(["format=js","idx="+n,"n="+t,"nc="+sb_gt(),"pid=hp"]),u;_w.g_vidOn&&f.push("video=1"),u="/HPImageArchive.aspx?"+f.join("&"),r.open("GET",u,!0),sj_be(r,"readystatechange",function(){r.readyState==4&&r.status==200&&(h=br(r.responseText),st=Math.min(ri,n+(h&&h.images&&h.images.length)||0),i(!!h))}),r.send(null)}function br(n){if(typeof n!="string"||!n)return null;if(_w.JSON&&_w.JSON.parse)try{return _w.JSON.parse(n)}catch(t){}try{return new Function("return "+n)()}catch(t){return null}}function kr(){for(var n=0,t=h.images.length;n<t;n++)ti(n,n)}function ti(t,i){var u;if(n[t]=h.images[i]||null,dr){var f=Math.max(screen.height,screen.width),e=Math.min(screen.height,screen.width),r="//"+window.location.host+"/iod/";n[t].url=r+f+"/"+e+"/"+n[t].fullstartdate,n[t].portraiturl=r+e+"/"+f+"/"+n[t].fullstartdate}else nu&&(u="_1920x1080.jpg",n[t].url=n[t].urlbase+u)}function li(i){var r=t+1;at[r]||r>=ri?lt():n[r]?vi(r):fr(r,1,function(n){n?(ti(r,0),vi(r)):lt(),typeof i=="function"&&i(n)})}function tu(){var n=g_prefetch;n&&(n.Im&&fu(n.Im),n.Vid&&eu(n.Vid))}function fu(n){var t=new Image;t.onload=function(){var t=sj_cook.get("_SS","bIm");t=t&&t.length>=3?t.substring(t.length-3)+n.hash:n.hash,sj_cook.set("_SS","bIm",t,0,"/")},t.src=n[ot]}function eu(n){var t=sj_ce("video","prefVid"),i,u,r;try{t.setAttribute("preload","auto")}catch(f){}for(t.width=956,t.height=512,i=0,u=n.length;i<u;i++)r=sj_ce("source"),r.src=n[i][2],r.type=n[i][1],t.appendChild(r);t.style.display="none",sj_b.appendChild(t),sj_be(t,"canplaythrough",function(){var n=_ge("prefVid");n&&sj_b.removeChild(n)})}function vi(t){if(!at[t]){lt();var i=n[t],r=new Image;r.onload=function(){sj_evt.fire("onHPIVImg"+t,t),at[t]=1},r.src=i.pano?i.pano.image:_w.g_vidOn&&i.vid?i.vid.image:i[ot]}}function ii(n){t==0||w||(t--,bi(),ur(1,t)),typeof n!==s&&n&&sj_pd(n)}function dt(n){if(t<st-1&&!w&&!ui){var i=t+1;ui=1,at[i]||ru(),sj_evt.bind("onHPIVImg"+i,er,1),ur(-1,i)}typeof n!==s&&n&&sj_pd(n)}function er(n){n[1]==t+1&&(t++,ui=0,bi())}function lt(){var r=n[t],f=r[gi]=="1"?et:rt,h,o,c;r.vid&&(h=r.vid.dark,_ge("sh_pl").parentNode.className=h?"sh_pll":"sh_pld",_ge("sh_ps").parentNode.className=h?"sh_psl":"sh_psd",f=h?et:rt),o=f+"dis",y.className=f,c=y.href===ut?ei:bt,y.style.cursor=c,i.firstChild.className=t===st-1?o:f,u.firstChild.className=t==0?o:f,i.title=p.previous,u.title=p.next,sj_evt.fire("updateHpImg",r),e&&typeof hpWall!==s&&(r.wp&&!r.vid?(hpWall.enabled=!0,hpWall.hash=r.hsh,e.firstChild.className=f,e.title=p.walls,e.style.cursor=bt):(hpWall.hash="",hpWall.enabled=!1,hpWall.tB(0),e.firstChild.className=o,e.title=p.walle,e.style.cursor=ei))}function ru(){i.title=p.loading}function bi(){w=1,si&&clearTimeout(si),li(),a&&a.disable();var n=_ge("vid");if(_w.g_vidOn&&(VM.InFoc=0,n&&n.style.opacity!="0"&&(n.onended=null,VM.hideControls())),r&&r.style.opacity!="0"){_ge("panoControls").style.visibility=ft,f.style.backgroundImage="url()",nt.down(function(){f.removeChild(r),nt=r=null,wi()});return}wt.down(wi)}function wi(){var e;f.style.display=ct;var i=n[t],r=_ge("vid"),o=_ge("sc_mktb"),s=n[t].fullstartdate,h=s.substr(0,8)+"_"+s.substr(8,4),u;if(r&&_w.g_vidOn&&VM&&(r.pause&&!r.paused&&r.pause(),r.style.display="none",sj_so(r,0),VM.Loaded=!1,_w.g_vid=null,i.vid)){if(gt(i.vid.caption,i.copyrightlink),u="url('"+i.vid.image+"')",f.style.backgroundImage=u,f.style.display=ki,i.vid.loop){r.onended=VM.play;try{r.setAttribute("loop","true")}catch(c){}}else{r.onended=VM.end;try{r.removeAttribute("loop")}catch(c){}}_w.g_vid=i.vid.sources,VM.InFoc=1,VM.sa_vid_ld(uu),wt.up(rr)}i.pano&&kt(i.pano),i.vid||(gt(i.copyright,i.copyrightlink),u=i[ot],i.pano&&(u=i.pano.image),u="url('"+u+"')",f.style.backgroundImage=u,f.style.filter=sb_i8l?"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i[ot]+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity=0);":"",f.style.display=ki,wt.up(rr)),sj_evt.fire("onHPImgViewerNavigation",h),o&&(e=_ge("hp_husb"),o.style.display=!!e||i.vid||i.pano?"none":"block")}function gt(n,t){var i=typeof t==s||t==""||t==ut,r=_ge("musCard");r?y.href=ut:(y.title=n,y.href=i?ut:t,y.style.cursor=i?ei:bt)}function uu(){var n=_ge("vid");n&&VM&&VM.InFoc&&(VM._autoPlay===!1?VM.pause():VM.play(),VM.Loaded=!0,n.style.display="block",sj_so(n,100))}function rr(){var e,o,y,r,v,h,l,p,i,f,u,c;if(w=0,e=n[t],_w.g_hot&&(!e.pano||e.pano.hs===!0)){for(o=e.hs,i=0,c=o.length;i<c;i++){if(i>=o.length){typeof g_triggerElems!==s&&(g_triggerElems[i].isHotSpotDisabled=!0);continue}else typeof g_triggerElems!==s&&(g_triggerElems[i].isHotSpotDisabled=!1);y=i+1,r=o[i],v=_ge("sc_hst"+y),v.style.left=r.locx+"%",v.style.top=r.locy+"%",h=_ge("sc_hs"+y),h.href=r.link,h.firstChild.innerHTML=r.desc,h.firstChild.nextSibling.innerHTML=r.query}a&&a.intro(1)}var d=_ge("hp_pgNav"),k=d?2:0,b=_ge("hp_pgbar");if(b)for(l=b.getElementsByTagName("h3"),p=e.msg,i=0,c=l.length;i<c;i++){if(f=p[i],!f)break;if(u=l[i+k],!u)break;u.parentNode.id!==vr&&(u.innerHTML=f.title,u.nextSibling.innerHTML=f.text,u.nextSibling.href=f.link)}}function ur(n){if(typeof hpl!==s){if(hpl&&(v=hpl),v&&v.ssd){var i=v.ssd,r=new Date(parseInt(i.substr(0,4),10),i.substr(4,2)-1,parseInt(i.substr(6,2),10)+n);v.ssd=r.getFullYear().toString()+pi(r.getMonth()+1)+pi(r.getDate())+"_"+i.substr(9,4)}v&&(hpl=v)}}function pi(n){return(n<10?"0":"")+n}function pr(n){var i,u,t;if(gt(n.cap,n.caplink),n.spots)for(i=0,u=n.spots.length;i<u;i++)t=n.spots[i],Pano.CreateHotspot(t[0],t[1],t[2]);w=1,r.style.opacity=0,f.style.opacity=1,r.style.visibility=c,nt.up(function(){var i,t;_ge("panoControls").style.visibility=c,sj_evt.bind(fi,function(){Pano.StopAnimation()}),i=!0,n.an===!0&&(t=sj_cook&&sj_cook.get("SRCHHPGUSR","HAP"),t&&t!="0"&&(i=!1),i&&(si=sb_st(function(){Pano.IdleAnimate()},500))),w=0})}function o(n){return sj_ce(iu,n)}function or(){var l,u,h,c,e,tt,n,s;if(_ge("panoDiv")||(r=o("panoDiv"),f.appendChild(r),nt=_anim.fadeE(r,nr)),l=_ge("hp_ctrls"),l&&!_ge("panoControls")){var a=o("panoLeft"),y=o("panoRight"),v=o("panoUp"),w=o("panoDown"),k=o("panoZoomIn"),p=o("panoZoomOut"),i=o("panoPosition");i.appendChild(v),i.appendChild(a),i.appendChild(y),i.appendChild(w),u=o("panoControlSet"),u.appendChild(p),u.appendChild(i),u.appendChild(k),h=o("panoControls"),h.appendChild(u),c=[a,y,v,w,k,p];function t(n,t){Pano.SetCameraFidelity(!1),oi=!1,g(n,t)}function g(n,t){oi==!1?(Pano.MovePano(n,t),sb_st(sj_wf(g,n,t),25)):Pano.SetCameraFidelity(!0)}function d(){oi=!0}for(e=0,tt=c.length;e<tt;e++)sj_be(c[e],hi,d);sj_be(_d,hi,d),sj_be(k,b,sj_wf(t,"z",1)),sj_be(p,b,sj_wf(t,"z",-1)),n=.05,s=_G&&_G.RTL===!0,sj_be(a,b,sj_wf(t,"x",s?-n:n)),sj_be(y,b,sj_wf(t,"x",s?n:-n)),sj_be(v,b,sj_wf(t,"y",n)),sj_be(w,b,sj_wf(t,"y",-n)),sj_be(_w,"blur",Pano.StopAnimation),l.appendChild(h)}}function kt(n){function t(){or(),n.hs===!1&&a&&a.disable();var i=_w.location.search.indexOf("debug=1")!=-1,t="?h="+_w.location.host;Pano.InitializePano(n.url,r,function(){pr(n)},i,n.pos,n.maxfov,t),sj_evt.fire("onPanoComplete")}typeof Pano===s?(sj_evt.bind("onPanoLoad",function(){t()}),sj_jb("HomepagePano_c"),sj_be(_w,"resize",function(){r&&typeof Pano!==s&&typeof Pano.SetViewportSize===cr&&Pano.SetViewportSize(r.offsetWidth,r.offsetHeight)})):t()}function ni(){sj_evt&&sj_evt.fire(fi)}function yr(){var n=sj_cook&&sj_cook.get("_UR","D"),t=sj_cook&&sj_cook.get("_UR","DHP");return n&&n!="0"&&n!="1"||t&&t!="0"?!0:!1}function lr(){var t="isHomepage",i="http://"+_d.domain+"/",r=i.replace(/www\./i,""),n=sr();return n?ai(n,t,i)||ai(n,t,r):0}function ai(n,t,i){try{return n[t](i)}catch(r){return 0}}function sr(){var n=_ge("dhp_detect");return n||(n=sj_ce("span","dhp_detect"),n.style.behavior="url(#default#homepage)",sj_b.appendChild(n)),n}function ir(){if(yr()||lr())l&&(l.style.display=ct),vt&&(vt.style.display=ct);else if(it&&l&&l.style.display!=ct){var n=l.offsetLeft;(!ht||ht&&ht.clientWidth<di)&&(n-=di),l.style.visibility=n<it.offsetLeft+it.clientWidth?ft:c}}var bt="pointer",ei="default",s="undefined",cr="function",c="visible",ft="hidden",vr="hp_pgps",g="focus",d="click",ar="keydown",b="mousedown",hi="mouseup",tt="mouseover",ci="touchstart",fi="hpsbact",iu="div",ou="dhplink",ki="block",ct="none",ri=8,nr=500,st=0,t=0,ui=0,v=null,n=[],at=[],a,ot="url",gi="bot",f=_ge("bgDiv"),dr=_ge("bgDivPortrait"),i=_ge("sh_igl"),u=_ge("sh_igr"),e=_ge("sh_igw"),w=0,y=_ge("sh_cp"),et="sc_light",rt="sc_dark",ut="javascript:void(0)",h=null,oi=!0,gr="ontouchstart"in _w,r=null,si=null,k=_ge("sb_form_q"),yi=k&&k.parentNode,p,wt=_anim.fadeE(f,nr),nt,it=_ge("sc_hdu"),l=_ge("dhp"),vt=_ge("dhplink"),ht=_ge("id_h"),di=300,nu=wr();if(i&&u&&(_w.hpPanoLoad=function(n){kt(n)},!_w.g_IMVL)){typeof _w.g_IMVL!==s&&(_w.g_IMVL=1),sj_evt.bind("onHPHS",function(n){a=n[1]},1),k&&(sj_be(k,g,ni),sj_be(k,ar,ni),yi&&sj_be(yi,d,ni)),sj_evt.bind("onRBComplete",function(){var n=_w.sched;_w.g_hptse&&n&&n.schedule({ns:"H",task:function(){n.complete("H")}}),tu()},1),it&&(l||vt)&&ht&&(sj_evt.bind(ou,ir,1),sj_be(_w,"resize",ir,!1));var hr=new RegExp("[\\?&]ssd=([^&#]*)"),yt=hr.exec(_w.location.href),tr=1,pt;yt!=null&&yt[1]!=null&&(pt=yt[1].replace("_",""),tr=ri),fr(0,tr,function(r){function f(n){sb_st(sj_wf(li,n),1),sj_ue(i,tt,f),sj_ue(u,tt,f),sj_ue(i,g,f),sj_ue(u,g,f)}var o,l,y,v,s,w,a;if(r){if(t=0,pt!=null)for(kr(),o=0;o<st;o++)n[o].fullstartdate==pt&&(t=o);else ti(0,0);p=p||h.tooltips,sj_be(i,d,dt),sj_be(u,d,ii),i.firstChild.style.visibility=c,u.firstChild.style.visibility=c,l=_ge("sh_igf"),l&&(l.firstChild.style.visibility=c),y=_ge("sh_pl"),v=_ge("sh_ps"),lt(),i.firstChild.className=n[t][gi]=="1"?et:rt,n[t].pano?kt(n[t].pano):n[t].vid&&(s=n[t].vid.dark,y.parentNode.className=s?"sh_pll":"sh_pld",v.parentNode.className=s?"sh_psl":"sh_psd",i.firstChild.className=s?et:rt),w=function(i){sj_pd(i),t==0&&n&&n.length==1?f(sj_wf(dt,i)):dt(i)},a=function(i){sj_pd(i),t==0&&n&&n.length==1?f(sj_wf(ii,i)):ii(i)},gr&&(sj_be(i,ci,w),sj_be(u,ci,a)),sj_be(i,tt,f),sj_be(u,tt,f),sj_be(i,g,f),sj_be(u,g,f),e&&hpWall&&(_G.Mkt=="zh-CN"?sj_be(e,d,hpWall.dLFree):sj_be(e,d,hpWall.dL))}}),function(){var p="px",ot="click",w="block",ut="none",v="height",y="HPTBD",n=400,k=35,et=1,rt=.5,b=_ge("sh_igf"),f=_ge("hp_sw_hdr"),t=f.style,o=_ge("sb_foot"),a=_ge("sb_form_q"),l=a&&a.parentNode,h=_ge("sh_fu"),r,e,u,i=!1;if(b&&f&&o&&l){var nt=function(){r=_anim.animE(f,v,0,k,{duration:n,unit:p}),e=_anim.animE(o,v,0,k,{duration:n,unit:p}),u=_anim.fadeE(l,n,n,rt,et),sj_be(b,ot,d),sj_evt.bind(fi,s)},it=function(){t.display=ut,t.overflow=c,i=!0,sj_evt.fire(y)},g=function(){t.overflow=c,i=!1,sj_evt.fire(y)},d=function(n){i?s():tt(),sj_pd(n)},tt=function(){i||(t.display=w,t.overflow=ft,_w.bhptb&&bhptb.hide&&bhptb.hide(n),_w.bhppgb&&bhppgb.hide&&bhppgb.hide(n),_w.bhpnav&&bhpnav.hide&&bhpnav.hide(),r.revert(it),e.revert(),u.down(),h.className="hpcSmall")},s=function(){i&&(t.display=w,t.overflow=ft,_w.bhptb&&bhptb.show&&bhptb.show(n),_w.bhppgb&&bhppgb.show&&bhppgb.show(n),_w.bhpnav&&bhpnav.show&&bhpnav.show(),r.start(g),e.start(),u.up(),h.className="hpcFull")};nt()}}()}},sj_evt.bind("onBgSet",ImgViewer,1),sj_evt.bind("onAjaxReady",ImgViewer,1)